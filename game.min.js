const buttonColors=["red","blue","green","yellow"];let gamePattern=[];let userClickedPattern=[];let level=0
let play=!1;function nextSequence(){let randomNumber=Math.floor(Math.random()*4);let randomChosenColour=buttonColors[randomNumber];gamePattern.push(randomChosenColour);flash()};function checkGame(btnID){if(gamePattern.length>userClickedPattern.length){userClickedPattern.push(btnID);if(gamePattern[userClickedPattern.length-1]==userClickedPattern[userClickedPattern.length-1]){playSound(userClickedPattern[userClickedPattern.length-1])
if(gamePattern.length==userClickedPattern.length){play=!1;level++;$("#level-title").text(`Level: ${level}`);userClickedPattern=[];setTimeout(()=>{nextSequence()},300)}}else{playSound('wrong')
play=!1;let b=userClickedPattern[userClickedPattern.length-1]
userClickedPattern=[];gamePattern=[];level=0;$(`#${b}`).removeClass(b);$(`#${b}`).addClass('game-over');setTimeout(()=>{$("#level-title").text("Press A Key to play again");$(`#${b}`).removeClass('game-over');$(`#${b}`).addClass(b)},500)}}};function flash(){const flashLength=200;const gap=200;gamePattern.forEach((color,i)=>{setTimeout(()=>{const btn=$(`#${color}`);btn.addClass("pressed");playSound(color);setTimeout(()=>btn.removeClass("pressed"),flashLength)},i*(flashLength+gap))});setTimeout(()=>{play=!0},(flashLength+gap)*gamePattern.length)}
function playSound(key){let audio=new Audio(`./sounds/${key}.mp3`);audio.play()};function isPhoneOnly(){return/Android|iPhone|iPod/i.test(navigator.userAgent)&&!/iPad/i.test(navigator.userAgent)}
$(document).keydown(function(event){if(gamePattern.length==0){if(/^[a-zA-Z]$/.test(event.key)){nextSequence();$("#level-title").text(`Level: ${level}`)}}});$(".btn").click(function(){if(isPhoneOnly()){if(gamePattern.length==0){nextSequence();$("#level-title").text(`Level: ${level}`)}};if(gamePattern.length==0){$("#level-title").css('font-size','60px');setTimeout(function(){$("#level-title").css('font-size','3rem')},100)}else{if(play){let btnID=$(this).attr('id');let btn=$(this)
btn.addClass("pressed");setTimeout(function(){btn.removeClass("pressed")},100);checkGame(btnID)}}})